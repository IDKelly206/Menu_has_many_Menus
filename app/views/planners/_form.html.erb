<%= simple_form_for @planner, url: planners_path do |f| %>
  <div class="form-body form__body">
    <p>Select Meal</p>
    <% invalid = @planner.errors.include?(:meal_type) %>
    <% if invalid %>
      <div class="invalid-feedback d-block">
        <% @planner.errors.messages_for(:meal_type).each do |error_message| %>
          <%= error_message %>
        <% end %>
      </div>
    <% end %>
    <div class="radio-btns">
      <% @meal_types.each do |meal_type| %>
        <div class="radio-item">
          <%= f.radio_button :meal_type, meal_type, class: "radio-btn btn--pill btn--pill-meal" %>
          <%= f.label "meal_type_#{meal_type.downcase}", meal_type.capitalize %>
        </div>
      <% end %>
    </div>
    <p>Select Diners</p>
    <% invalid = @planner.errors.include?(:user_ids) %>
    <% if invalid %>
      <div class="invalid-feedback d-block">
        <% @planner.errors.messages_for(:user_ids).each do |error_message| %>
          <%= error_message %>
        <% end %>
      </div>
    <% end %>
    <div class="checkboxes">
      <%= f.collection_check_boxes :user_ids,
                                   @users,
                                   :id,
                                   :name_first,
                                   include_hidden: false do |b| %>
        <%= b.check_box(class: "check_box btn--pill btn--pill-user",
                        checked: @planner.user_ids.nil? ? false : params[:planner_form][:user_ids].include?(b.value.to_s) )  %>
        <%= b.label %>
      <% end %>
    </div>
    <p>Select Days</p>
    <% invalid = @planner.errors.include?(:menu_ids) %>
    <% if invalid %>
      <div class="invalid-feedback d-block">
        <% @planner.errors.messages_for(:menu_ids).each do |error_message| %>
          <%= error_message %>
        <% end %>
      </div>
    <% end %>
    <div class="checkboxes">
      <%= f.collection_check_boxes :menu_ids,
                                   @menus.ordered,
                                   :id,
                                   :day_of_week,
                                   include_hidden: false do |b| %>
        <%= b.check_box(class: "check_box btn--pill btn--pill-date",
                        checked: @planner.menu_ids.nil? ? false : params[:planner_form][:menu_ids].include?(b.value.to_s) ) %>
        <%= b.label  %>
      <% end %>
    </div>
      <%= f.submit "Next", class: "btn btn--dark" %>
  <% end %>
  <%= link_to "Cancel", "#",
      data: { action: "turbo-modal#hideModal" },
      type: 'button',
      class: "btn btn--dark" %>
  </div>
